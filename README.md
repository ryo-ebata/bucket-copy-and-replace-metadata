# bucket-copy-and-metadata-directive

S3バケット間でファイルをコピーし、PDFファイルの場合はメタデータを上書きするシェルスクリプトです。

## 機能

- 指定したS3バケット間でファイルをコピー
- PDFファイルの場合は、Content-Typeを`application/pdf`に設定
- その他のファイルは元のメタデータを保持したままコピー

## 前提条件

- AWS CLIがインストールされていること
- AWS CLIの認証情報が適切に設定されていること
- 必要な権限（S3の読み取り・書き込み権限）が付与されていること

## 使用方法

1. スクリプト内の以下の変数を設定します：
   ```bash
   BUCKET=""      # コピー元のバケット名
   PREFIX=""      # コピー元のプレフィックス（オプション）
   DEST_BUCKET="" # コピー先のバケット名
   ```

2. スクリプトを実行します：
   ```sh
   sh bucket-copy-and-metadata-directive.sh
   ```

## 注意点

- コピー元とコピー先のバケットが存在することを確認してください
- 大量のファイルをコピーする場合は、実行に時間がかかる可能性があります
- コピー先のバケットに同名のファイルが存在する場合、上書きされます
- エラーが発生した場合は、AWS CLIのログを確認してください

## トラブルシューティング

- 権限エラーが発生した場合：
  - AWS CLIの認証情報が正しく設定されているか確認
  - IAMポリシーに必要な権限が含まれているか確認

- バケットが見つからないエラーが発生した場合：
  - バケット名が正しいか確認
  - リージョンが正しく設定されているか確認
